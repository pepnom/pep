 

   <!DOCTYPE html>
   <html><head>
   <meta http-equiv='Content-type' content='text/html;charset=UTF-8' />
   <link rel='alternate' type='application/rss+xml'
     title='RSS Feed for Pep And Nom Blog' href='/rss.xml' />
   <title>Pep And Nom Blog</title>
   <!-- I will try to read this in with sed -->
   <style type='text/css'>
     


     body { 
       margin-left:5%; margin-right:5%; 
       padding:0; 
       color: #202122;

       /* need a darker grey color:gray; */
     }
     a { 
       text-decoration:none; 
       /* the wren.io link color */
       /* color: #3399cc; */
       color: #386acd;
       /* color:blue; */
     }
     a:hover { 
       /* color:darkblue; */
       color: #3056ad;
       border-bottom: 1px dashed blue; 
     }

     p { 
       margin-left:2em; margin-right:2em; 
       padding:0; 
     }

     /* used or 1st 2nd etc */

     sup.ordinal {
       text-decoration: underline;  
       color: darkgray;
       font-style: italic;
       text-transform: uppercase; 
     }

     h1.page-title { 
       text-align: center;
       color: peru; 
       /* brown colours: 
          siena,maroon,peru,goldenrod,chocolate,
          burlywood */
          
     }
     /* tan: a light brown */
     h1 { color: lightslategray; }
     /* make these headings capital case */
     h2 { 
       text-transform: capitalize; 
       color: lightslategray;
     }
     h3 { 
       text-transform: capitalize; 
       color: lightslategray; 
     }
     
     h3.blog-index-title { color: chocolate; }

     /* the date that is at the top of each blog post */
     h3.blog-post-date { color: darkkhaki; }
     
     div.footer { 
       text-align: center;
       color: goldenrod; 
       width: 100%;
       /* brown colours: 
          siena,maroon,peru,goldenrod,chocolate,
          burlywood */
     }

     /* a list of blog posts */
     dl.blog-index {
       margin-left: 2em;
     }

     /* a list of documents in a folder */
     dl.doc-index {
       margin-left: 2em;
     }
 
     /* a list within a list */
     ul.sublist {
       list-style-type: none;
     }
 
     /* an abbreviation like html, ast, xml */ 
     abbr.tek-acronym {
       border-bottom: 1px dashed purple; 
       text-decoration: none;
       text-transform: uppercase;
       /* font-style: italic; */
       font-size: 0.8em;
       *color: purple;
     }

     /* a one line description of a document  */
     em.doc-description {
       margin-left: 2em;
       color: lightslategray;
     }

     /* this is for pretty printing nom code. But I need lots 
        of span tags in the code. I copied this from the wren.io
        inspect element code snippet. <code> wrapped in <pre>
        in the html there is lots of 
          <span class="punctuation">.</span> etc
          and in the css .punctuation { color: #999; }

        Normal text is black/grey

        the pre has background color #f5f2f0 which is an offwhite
        here are the colours: 
          punctuation: #999 (grey)
          function eg 'print': #DD4A68 (red)
          string: #690 (green)
          keyword: #07A (aqua)
          operator eg '=' : #9a6e3a (brown)
        */

     /* start of pretty print css */

     pre.nom-code { 
       background-color: #f5f2f0;
       border-radius: 10px;
     }

     code.language-nom {
       font-family: Consolas, Monaco, monospace;
       text-align: left;
       white-space: pre;
       word-spacing: normal;
       word-break: normal;
       word-wrap: normal;
       line-height: 1.5;
     }

     span.nom-command { color: #9a6e3a;  /* brown */ }
     /* displaying unknown commands */
     span.nom-unknown { color: orange; }
     span.nom-error { color: red; } 
     span.nom-word { color: #09C; }
     span.nom-keyword { color: #07A; }
     span.nom-string { color: #690; }
     span.nom-class { color: #2A0; }
     span.nom-punct { color: #AAA; }
     span.nom-comment { color: gray; }
     
     /* end of pretty print css */

     /* displaying commands */
     code.nom-command {
       font-family: Consolas, Monaco, monospace;
       font-style: italic;
       font-size: 0.9em;
     }

     /* This is used for file names as well */
     code {
       font-family: Consolas, Monaco, monospace;
       font-size: 0.9em;
     }

     /* used for parse tokens in documents (text ending in *) */
     code.nom-token { 
       color: gray;
       font-size: 0.9em;
       font-style: italic;
     }

     /* a single line of code */
     pre.codeline { 
       margin-left:2em; 
       padding:0; 
     }

     figcaption.code-caption { 
       color: white;
       background-color: lightslategray; 
       #background-color: tan; 
       # background-color: sienna; 
       border-radius: 4px;
       padding-left: 1em; padding-bottom: 4px; padding-top: 4px;
       font-weight: normal; 
       width: 90% 
       /* border-bottom: 1px solid lightgrey; */
     }

     /* a centred element or image */
     .center {
        display: block;
        margin-left: auto;
        margin-right: auto;
        width: 50%;
     }

     /* an element which floats to the left */
     .float-left {
       float: left; 
       /*width: 10%; */
       text-align: center;
       font-style: italic;
       font-size: smaller;
       text-indent: 0;
       border-none;
       /* border: thin silver solid; */
       margin: 0.5em;
       padding: 0.5em;
     }

     /* an element which floats to the right */
    .float-right {
      float: right; 
      /*width: 10%; */
      text-align: center;
      font-style: italic;
      font-size: smaller;
      text-indent: 0;
      border: none;
      /* border: thin silver solid; */
      margin: 0.5em;
      margin-right: 3em;
      padding: 0.5em;
    }

    img.image-right {
      width: 100px;
    }
    img.image-left {
      width: 100px;
    }

    .chess-piece {
      /* background-color:#fff; */
      border:1px solid black;    
      border-radius:50%;
      font-size: 1.5em;
      padding: 5px;
    }

    /* this is for the big curly quotes before a <blockquote> quotation 
       html is <blockquote>text<cite>person</cite></blockquote> */
    blockquote.quotation {
      font-family: Georgia, serif;
      font-size: 18px;
      font-style: italic;
      width: 500px;
      margin: 0.25em 0;
      padding: 0.35em 40px;
      line-height: 1.45;
      position: relative;
      color: #383838;
    }

    blockquote.quotation:before {
      display: block;
      padding-left: 10px;
      content: "\201C";
      font-size: 80px;
      position: absolute;
      left: -20px;
      top: -20px;
      color: #7a7a7a;
    }

    blockquote.quotation cite {
      color: #999999;
      font-size: 14px;
      display: block;
      margin-top: 5px;
    }

    blockquote.quotation cite:before {
      content: "\2014 \2009";
    }
   </style></head>
   <body>

    
<p>
<p>


<p>
<!-- ------------ page title -------------------- -->
<h1 class='page-title'> &Popf;&eopf;&popf; üô¥ &Nopf;&oopf;&mopf;</h1>

<a href='http://www.nomlang.org/'>home </a> |
<a href='/doc/'>documentation </a> |
<a href='/eg/'>examples </a> |
<a href='/tr/'>translators </a> |
<a href='/download/'>download </a> |
<a href='/post/index.html'>blog </a> |
<a href='/post/posts.html'>all blog posts </a> 
<img style='border-radius:50%;width:10em;' class='float-right'  src='/image/img.8765.jpeg'/>

<p>


<p>

<p>
<p>
<!-- doclist= -->
<!-- doc=./doc/pepnom.doc.unicode.txt -->
<p>
<!-- ------------------------------- -->
<h2> unicode and the &Popf;&eopf;&popf;/&Nopf;&oopf;&mopf; system</h2>

<p>
 About how <em>nom</em> handles characters, unicode and &ldquo;combining characters
&rdquo; or &ldquo;grapheme clusters&rdquo; . This document contains notes and a discussion about
 how to deal with unicode and combining characters.
<p>
 Unicode support is very very very important in the &Popf;&eopf;&popf; üôµ  &Nopf;&oopf;&mopf; system because
 a language parsing and recognising system that doesn&apos;t do unicode is 
 a bit silly. However, this is a work in progress.
<p>
 The <em>pep</em> interpreter tool (written in plain c) reads and manipulates
 byte characters, so if your script with unicode characters works 
 (and it may) then it is more good luck than good management.
<p>
 The translation scripts can translate into languages that have 
 (good?) unicode support. This is probably the most difficult thing
 about writing the translation scripts: that the <code class='nom-command'><a title='nom command reference: read' href='http://nomlang.org/doc/commands/nom.read.html'>read</a></code> function
 should support reading one unicode character or grapheme cluster 
 properly, which may not be trivial.
<p>
<!-- ------------------------------- -->
<h3> diacritics</h3>

<p>
 Diacritics are little symbols that may appear on top of characters
 and often they are the dastardly cause of unicode grapheme clusters.
 There are some writing systems (eg Lithuanian ?) where you can only
 express the diacritics with a sequence of unicode code points. 
 <p>
 In other languages there is a single code point for a character with
 diacritic. In this case the UTF8 string etc can be &ldquo;normalised
&rdquo; (see the go code below).
<p>
 <figure class='code-with-caption'>
<figcaption class='code-caption'>
 example of diacritic 
 </figcaption>
<pre class='codeblock'>

    For example, the letter √© (e with acute accent) may be equivalently written
    \u00E9 or with a combining accent as \u0065\u0301.
  </pre>
</figure>
 <p>
<!-- ------------------------------- -->
<h3> grapheme clusters</h3>

<p>
 Grapheme clusters are sequences of unicode code points that combine
 to form one visible character. I am only starting to give proper 
 thought to these in the &Popf;&eopf;&popf; üôµ  &Nopf;&oopf;&mopf; system (2025). 
<p>
 <figure class='code-with-caption'>
<figcaption class='code-caption'>
 an example of grapheme clusters
 </figcaption>
<pre class='codeblock'>

    In the following code, the uÃà is not the single Unicode character U+00FC but
    is a single grapheme cluster composed of two Unicode characters, the plain
    ASCII u U+0075 followed by the combining diaeresis U+0308.

    fmt.Println("JuÃàrgen «Öemal")
    fmt.Println("Ju\u0308rgen \u01c5emel")
  </pre>
</figure>
<p>
 vim may not handle this correctly because the diaeresis does not 
 appear over the 'u'. Or this could be a copy paste problem. 
<p>
 <blockquote class='quotation'>
 
  There are visual-characters in use which can only be represented in
  Unicode using combining characters. In other words for which there is no
  precomposed character.  
  <cite> redgrittybrick on stackoverflow
 </cite>
</blockquote>

<p>
<!-- ------------------------------- -->
<h3> grapheme clusters and go</h3>

<p>
 The Windows console (conhost.exe) doesn&apos;t support combining codes. You'll
 have to first normalize to an equivalent string that uses precomposed
 characters. 
<p>
 you can use golang.org/x/text/unicode/norm to do the
 normalization (e.g. norm.NFC.String("JuÃàrgen «Öemal"))
<p>
 <figure class='code-with-caption'>
<figcaption class='code-caption'>
 example code from stack overflow for normalising grapheme clusters
 </figcaption>
<pre class='codeblock'>

    s := "Ju\u0308rgen \u01c5emel"
    fmt.Println(s)       // dieresis not combined with u by conhost.exe
    s = norm.NFC.String(s)
    fmt.Println(s)       // shows correctly
  </pre>
</figure>
<p>
<p>
<!-- ------------------------------- -->
<h3> grapheme clusters and java</h3>

<p>
 Apparently java uses something called ICU which solves some of these
 grapheme cluster issues.
<p>
 <figure class='code-with-caption'>
<figcaption class='code-caption'>
 iterating over grapheme clusters not code points
 </figcaption>
<pre class='codeblock'>

   BreakIterator boundary = BreakIterator.getCharacterInstance(Locale.WHATEVER);
   boundary.setText(yourString);
   for (int start = boundary.first(), end = boundary.next();
           end != BreakIterator.DONE;
           start = end, end = boundary.next()) {
       String chunk = yourString.substring(start, end);
   }
 </pre>
</figure>
<p>
<!-- ------------------------------- -->
<h3> grapheme clusters and rust</h3>

<p>
 <figure class='code-with-caption'>
<figcaption class='code-caption'>
 split a string into unicode chars and diacritics
 </figcaption>
<pre class='codeline'>
 "‡§®‡§Æ‡§∏‡•ç‡§§‡•á".chars()
</pre>
</figure>
<p>
 Need to use a rust crate to do this?
<p>
 <figure class='code-with-caption'>
<figcaption class='code-caption'>
 rust code to get grapheme cluster into single value
 </figcaption>
<pre class='codeblock'>

    use unicode_segmentation::UnicodeSegmentation; // 1.5.0
    fn main() {
      for g in "‡§®‡§Æ‡§∏‡•ç‡§§‡•á".graphemes(true) {
        println!("- {}", g);
      }
    }
  </pre>
</figure>
<div class='footer'><small><em>
<p>

<img style='border-radius:50%;width:10em;' class='center'  src='/image/fig.deniliquin.jpg'/>

retro html <a href='/eg/text.tohtml.format.html'>formatted </a> by <a href='/eg/text.tohtml.pss'>nom </a>
comments/suggestions to: <em>mjb at nomlang dot org</em> 
<p>
  </em></small></div></body></html>
