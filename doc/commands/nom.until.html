 

   <!DOCTYPE html>
   <html><head>
   <meta http-equiv='Content-type' content='text/html;charset=UTF-8' />
   <link rel='alternate' type='application/rss+xml'
     title='RSS Feed for Pep And Nom Blog' href='/rss.xml' />
   <title>Pep And Nom Blog</title>
   <!-- I will try to read this in with sed -->
   <style type='text/css'>
     


     body { 
       margin-left:5%; margin-right:5%; 
       padding:0; 

       /* need a darker grey color:gray; */
     }
     a { 
       text-decoration:none; 
       /* the wren.io link color */
       color: #3399cc;
       /* color:blue; */
     }
     a:hover { 
       color:darkblue; 
       border-bottom: 1px dashed blue; 
       /* border-top: 1px dashed blue; */
     }

     p { 
       margin-left:2em; margin-right:2em; 
       padding:0; 
     }

     /* used or 1st 2nd etc */

     sup.ordinal {
       text-decoration: underline;  
       color: darkgray;
       font-style: italic;
       text-transform: uppercase; 
     }

     h1.page-title { 
       text-align: center;
       color: peru; 
       /* brown colours: 
          siena,maroon,peru,goldenrod,chocolate,
          burlywood */
          
     }
     /* tan: a light brown */
     h1 { color: lightslategray; }
     /* make these headings capital case */
     h2 { 
       text-transform: capitalize; 
       color: lightslategray;
     }
     h3 { 
       text-transform: capitalize; 
       color: lightslategray; 
     }
     
     h3.blog-index-title { color: chocolate; }

     /* the date that is at the top of each blog post */
     h3.blog-post-date { color: darkkhaki; }
     
     div.footer { 
       text-align: center;
       color: goldenrod; 
       width: 100%;
       /* brown colours: 
          siena,maroon,peru,goldenrod,chocolate,
          burlywood */
     }

     /* a list of blog posts */
     dl.blog-index {
       margin-left: 2em;
     }

     /* a list of documents in a folder */
     dl.doc-index {
       margin-left: 2em;
     }
 
     /* a list within a list */
     ul.sublist {
       list-style-type: none;
     }
 
     /* an abbreviation like html, ast, xml */ 
     abbr.tek-acronym {
       border-bottom: 1px dashed purple; 
       text-decoration: none;
       text-transform: uppercase;
       /* font-style: italic; */
       font-size: 0.8em;
       *color: purple;
     }

     /* a one line description of a document  */
     em.doc-description {
       margin-left: 2em;
       color: lightslategray;
     }

     /* this is for pretty printing nom code. But I need lots 
        of span tags in the code. I copied this from the wren.io
        inspect element code snippet. <code> wrapped in <pre>
        in the html there is lots of 
          <span class="punctuation">.</span> etc
          and in the css .punctuation { color: #999; }

        Normal text is black/grey

        the pre has background color #f5f2f0 which is an offwhite
        here are the colours: 
          punctuation: #999 (grey)
          function eg 'print': #DD4A68 (red)
          string: #690 (green)
          keyword: #07A (aqua)
          operator eg '=' : #9a6e3a (brown)
        */

     /* start of pretty print css */

     pre.nom-code { 
       background-color: #f5f2f0;
       border-radius: 10px;
     }

     code.language-nom {
       font-family: Consolas, Monaco, monospace;
       text-align: left;
       white-space: pre;
       word-spacing: normal;
       word-break: normal;
       word-wrap: normal;
       line-height: 1.5;
     }

     span.nom-command { color: #9a6e3a;  /* brown */ }
     /* displaying unknown commands */
     span.nom-unknown { color: orange; }
     span.nom-error { color: red; } 
     span.nom-word { color: #09C; }
     span.nom-keyword { color: #07A; }
     span.nom-string { color: #690; }
     span.nom-class { color: #2A0; }
     span.nom-punct { color: #AAA; }
     span.nom-comment { color: gray; }
     
     /* end of pretty print css */

     /* displaying commands */
     code.nom-command {
       font-family: Consolas, Monaco, monospace;
       font-size: 0.9em;
     }

     /* This is used for file names as well */
     code {
       font-family: Consolas, Monaco, monospace;
       font-size: 0.9em;
     }

     /* used for parse tokens in documents (text ending in *) */
     code.nom-token { 
       color: gray;
       font-size: 0.9em;
       font-style: italic;
     }

     /* a single line of code */
     pre.codeline { 
       margin-left:2em; 
       padding:0; 
     }

     figcaption.code-caption { 
       color: white;
       /* background-color: lightslategray; */
       background-color: #DD8811; 
       border-radius: 4px;
       padding-left: 1em; padding-bottom: 4px; padding-top: 4px;
       font-weight: normal; 
       width: 90% 
       /* border-bottom: 1px solid lightgrey; */
     }

     /* a centred element or image */
     .center {
        display: block;
        margin-left: auto;
        margin-right: auto;
        width: 50%;
     }

     /* an element which floats to the left */
     .float-left {
       float: left; 
       /*width: 10%; */
       text-align: center;
       font-style: italic;
       font-size: smaller;
       text-indent: 0;
       border-none;
       /* border: thin silver solid; */
       margin: 0.5em;
       padding: 0.5em;
     }

     /* an element which floats to the right */
    .float-right {
      float: right; 
      /*width: 10%; */
      text-align: center;
      font-style: italic;
      font-size: smaller;
      text-indent: 0;
      border: none;
      /* border: thin silver solid; */
      margin: 0.5em;
      margin-right: 3em;
      padding: 0.5em;
    }

    img.image-right {
      width: 100px;
    }
    img.image-left {
      width: 100px;
    }

    .chess-piece {
      /* background-color:#fff; */
      border:1px solid black;    
      border-radius:50%;
      font-size: 1.5em;
      padding: 5px;
    }

    /* this is for the big curly quotes before a <blockquote> quotation 
       html is <blockquote>text<cite>person</cite></blockquote> */
    blockquote.quotation {
      font-family: Georgia, serif;
      font-size: 18px;
      font-style: italic;
      width: 500px;
      margin: 0.25em 0;
      padding: 0.35em 40px;
      line-height: 1.45;
      position: relative;
      color: #383838;
    }

    blockquote.quotation:before {
      display: block;
      padding-left: 10px;
      content: "\201C";
      font-size: 80px;
      position: absolute;
      left: -20px;
      top: -20px;
      color: #7a7a7a;
    }

    blockquote.quotation cite {
      color: #999999;
      font-size: 14px;
      display: block;
      margin-top: 5px;
    }

    blockquote.quotation cite:before {
      content: "\2014 \2009";
    }
   </style></head>
   <body>

    


<p>
<!-- ------------ page title -------------------- -->
<h1 class='page-title'> &Popf;&eopf;&popf; ðŸ™´ &Nopf;&oopf;&mopf;</h1>

<a href='http://www.nomlang.org/'>home </a> |
<a href='/doc/'>documentation </a> |
<a href='/eg/'>examples </a> |
<a href='/tr/'>translators </a> |
<a href='/download/'>download </a> |
<a href='/post/index.html'>blog </a> |
<a href='/post/posts.html'>all blog posts </a> 
<img style='border-radius:50%;width:10em;' class='float-right'  title='/image/black.white/bw.horse.flower.jpg' src='/image/black.white/bw.horse.flower.jpg'/>



<p>


<blockquote class="quotation">
   I'm never bored by simplicity.
 
<cite>Charles Moore (Forth inventor)</cite>
</blockquote>
<p>

<p>
<p>

<!-- doclist= -->
<!-- doc=./doc/commands/nom.until.txt -->
<!-- ------------------------------- -->
<h2> the &Nopf;&oopf;&mopf; "until" command </h2>

<p>
 Read the input stream <em>until</em> the given text is encountered, or until the end
 of the input stream (EOF) is encountered. The until command will <em>not</em> stop
 at an end delimiter which is 'escaped' meaning that it is preceded with the
 current <code class='nom-command'><a title='nom command reference: escape' href='http://nomlang.org/doc/commands/nom.escape.html'>escape</a></code> character.
 <p>
 The <em>until</em> command is an important &ldquo;tokenising&rdquo; command that converts blocks
 of text in the <a href='pepnom.doc.inputstream.html'>input-stream </a> into grammar or
 parse tokens. Other tokenising commands are <code class='nom-command'><a title='nom command reference: while' href='http://nomlang.org/doc/commands/nom.while.html'>while</a></code> and <code class='nom-command'><a title='nom command reference: whilenot' href='http://nomlang.org/doc/commands/nom.whilenot.html'>whilenot</a></code> 
<p>
 There are 2 formats of the <em>until</em> command 
<p>
 <figure class='code-with-caption'>
<figcaption class='code-caption'>
 the 2 types of until
 </figcaption>
<pre class='nom-code'><code class='language-nom'>

   <span class='nom-command'>until</span> <span class='nom-string'>'abcd'</span><span class='nom-punct'>;</span>
   <span class='nom-command'>until</span><span class='nom-punct'>;</span>
  </code></pre>
</figure>
<p>
 In the 1<sup class='ordinal'>st</sup> version of <em>until</em> the input stream is read until the
 <a title='nom syntax reference: workspace' href='http://nomlang.org/doc/machine/pep.workspace.html'>workspace</a> buffer <em>ends with</em> the text &ldquo;abcd&rdquo; . In the 2<sup class='ordinal'>nd</sup> form of the
 command, the input-stream is read until the <em>workspace</em> buffer ends with the
 text that is in the current <a title='nom syntax reference: tape' href='http://nomlang.org/doc/machine/pep.tape.html'>tape</a> cell. 
 <p>
 The until command also ignores the <em>end-text</em> in the input stream if it is
 'escaped' (that is preceded with '\\'). The following example 
 illustrates parsing quoted text with the <em>until</em> command. 
<p>
 <figure class='code-with-caption'>
<figcaption class='code-caption'>
 tokenise and count quoted text
 </figcaption>
<pre class='nom-code'><code class='language-nom'>

    <span class='nom-command'>read</span><span class='nom-punct'>;</span> 
    <span class='nom-string'>'"'</span> <span class='nom-punct'>{</span> 
      <span class='nom-command'>a+</span><span class='nom-punct'>;</span> <span class='nom-command'>until</span> <span class='nom-string'>'"'</span><span class='nom-punct'>;</span> <span class='nom-command'>put</span><span class='nom-punct'>;</span> <span class='nom-command'>clear</span><span class='nom-punct'>;</span> <span class='nom-command'>add</span> <span class='nom-string'>"quoted*"</span><span class='nom-punct'>;</span> 
      <span class='nom-command'>push</span><span class='nom-punct'>;</span> <span class='nom-punct'>.</span><span class='nom-command'>reparse</span>
    <span class='nom-punct'>}</span>
    <span class='nom-command'>clear</span><span class='nom-punct'>;</span>
  <span class='nom-word'>parse</span><span class='nom-punct'>></span>
    <span class='nom-command'>pop</span><span class='nom-punct'>;</span> <span class='nom-command'>pop</span><span class='nom-punct'>;</span>
    <span class='nom-string'>"quoted*quoted*"</span> <span class='nom-punct'>{</span>
      <span class='nom-command'>clear</span><span class='nom-punct'>;</span> <span class='nom-command'>get</span><span class='nom-punct'>;</span> <span class='nom-command'>add</span> <span class='nom-string'>"\n"</span><span class='nom-punct'>;</span> <span class='nom-command'>++</span><span class='nom-punct'>;</span> <span class='nom-command'>get</span><span class='nom-punct'>;</span> <span class='nom-command'>--</span><span class='nom-punct'>;</span> <span class='nom-command'>put</span><span class='nom-punct'>;</span> 
      <span class='nom-command'>clear</span><span class='nom-punct'>;</span> <span class='nom-command'>add</span> <span class='nom-string'>"quoted*"</span><span class='nom-punct'>;</span> <span class='nom-command'>push</span><span class='nom-punct'>;</span> <span class='nom-punct'>.</span><span class='nom-command'>reparse</span>
    <span class='nom-punct'>}</span>
    <span class='nom-command'>push</span><span class='nom-punct'>;</span> <span class='nom-command'>push</span><span class='nom-punct'>;</span>
    <span class='nom-punct'>(</span><span class='nom-word'>eof</span><span class='nom-punct'>)</span> <span class='nom-punct'>{</span> 
      <span class='nom-command'>add</span> <span class='nom-string'>"Found "</span><span class='nom-punct'>;</span> <span class='nom-command'>count</span><span class='nom-punct'>;</span> <span class='nom-command'>add</span> <span class='nom-string'>" quoted text blocks \n"</span><span class='nom-punct'>;</span> <span class='nom-command'>print</span><span class='nom-punct'>;</span> <span class='nom-command'>clear</span><span class='nom-punct'>;</span>
      <span class='nom-command'>pop</span><span class='nom-punct'>;</span> <span class='nom-string'>"quoted*"</span> <span class='nom-punct'>{</span> <span class='nom-command'>clear</span><span class='nom-punct'>;</span> <span class='nom-command'>get</span><span class='nom-punct'>;</span> <span class='nom-command'>print</span><span class='nom-punct'>;</span> <span class='nom-punct'>}</span>
      <span class='nom-command'>quit</span><span class='nom-punct'>;</span>
    <span class='nom-punct'>}</span>
  </code></pre>
</figure>
<p>
<!-- ------------------------------- -->
<h3> examples</h3>

<p>
 <figure class='code-with-caption'>
<figcaption class='code-caption'>
 print only text that occurs between '&lt;' and '&gt;' characters
 </figcaption>
<pre class='codeline'>
 read; "&lt;" { until "&gt;"; print; } clear;
</pre>
</figure>
<p>
 <figure class='code-with-caption'>
<figcaption class='code-caption'>
 print only text between quote characters (excluding the quotes)
 </figcaption>
<pre class='codeline'>
 r; '"' { until '"'; clip; clop; print; } clear;
</pre>
</figure>
<p>
 <figure class='code-with-caption'>
<figcaption class='code-caption'>
 create a parse token 'quoted' from quoted text
 </figcaption>
<pre class='codeline'>
 read; '"' { until '"'; clip; clop; put; clear; add 'quoted*'; push; } clear;
</pre>
</figure>
<p>
 The <a title='nom command reference: while' href='http://nomlang.org/doc/commands/nom.while.html'>while </a> and <a title='nom command reference: whilenot' href='http://nomlang.org/doc/commands/nom.whilenot.html'>whilenot </a> commands are similar to
 the until command but they depend on the value of the 'peep' virtual machine
 buffer (which is a single-character buffer) rather than on the contents of
 the 'workspace' buffer like the until command.
<p>
<!-- ------------------------------- -->
<h3> notes</h3>

<p>
 The 'until' command usually will form part of the 'lexing' phase
 of a script. That is, the until command permits the script to 
 turn text patterns into 'tokens'. While in traditional parsing tools
 (such as Lex and Yacc) the lexing and parsing phases are carried out
 by separate tools, with the 'pep' tool the two functions are combined.
 <p>
 The until command essentially performs
 multiple read operations or commands and after each read checks to see
 whether the workspace meets the criteria specified in the argument.
<p>

<div class='footer'><small><em>

<img style='border-radius:50%;width:10em;' class='center'  title='/image/fig.deniliquin.jpg' src='/image/fig.deniliquin.jpg'/>

retro html <a href='/eg/text.tohtml.format.html'>formatted </a> by <a href='/eg/text.tohtml.pss'>nom </a>
comments/suggestions to: <em>mjb at nomlang dot org</em> 
<p>

  </em></small></div></body></html>
